!function(){Element.prototype.remove||(Element.prototype.remove=function(){this.parentNode?this.parentNode.removeChild(this):this.removeNode()}),function(t){t.forEach(function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){e.appendChild(t instanceof Node?t:document.createTextNode(String(t)))}),this.appendChild(e)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),function(t){t.forEach(function(t){t.hasOwnProperty("prepend")||Object.defineProperty(t,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){e.appendChild(t instanceof Node?t:document.createTextNode(String(t)))}),this.insertBefore(e,this.firstChild)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(t){"use strict";if("Element"in t){var e=t.Element.prototype,r=Object,n=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},i=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new i("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new i("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},a=function(t){for(var e=n.call(t.getAttribute("class")||""),r=e?e.split(/\s+/):[],o=0,i=r.length;o<i;o++)this.push(r[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=a.prototype=[],c=function(){return new a(this)};if(i.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return~s(this,t+"")},l.add=function(){var t,e=arguments,r=0,n=e.length,o=!1;do{t=e[r]+"",~s(this,t)||(this.push(t),o=!0)}while(++r<n);o&&this._updateClassName()},l.remove=function(){var t,e,r=arguments,n=0,o=r.length,i=!1;do{for(t=r[n]+"",e=s(this,t);~e;)this.splice(e,1),i=!0,e=s(this,t)}while(++n<o);i&&this._updateClassName()},l.toggle=function(t,e){var r=this.contains(t),n=r?!0!==e&&"remove":!1!==e&&"add";return n&&this[n](t),!0===e||!1===e?e:!r},l.replace=function(t,e){var r=s(t+"");~r&&(this.splice(r,1,e),this._updateClassName())},l.toString=function(){return this.join(" ")},r.defineProperty){var p={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(e,"classList",p)}catch(t){void 0!==t.number&&-2146823252!==t.number||(p.enumerable=!1,r.defineProperty(e,"classList",p))}}else r.prototype.__defineGetter__&&e.__defineGetter__("classList",c)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var r,n=arguments.length;for(r=0;r<n;r++)t=arguments[r],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:r.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var r=this.toString().split(" "),n=r.indexOf(t+"");~n&&(r=r.slice(n),this.remove.apply(this,r),this.add(e),this.add.apply(this,r.slice(1)))}),t=null}()),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),String.prototype.repeat||(String.prototype.repeat=function(t){"use strict";if(null===this||void 0===this)throw new TypeError('can"t convert '+this+" to object");if((t=+t)!==t)return"";if(0===(t=Math.floor(t)))return"";if(t<=0)throw new RangeError("repeat count must be non-negative");if(t===1/0)throw new RangeError("repeat count must be less than infinity");var e=""+this;if(0===e.length)return"";if(e.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var r="",n=0;n<t;n++)r+=e;return r}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e=Object(this),r=e.length>>>0,n=arguments[1],o=0;o<r;){var i=e[o];if(t.call(n,i,o,e))return i;o++}},configurable:!0,writable:!0})}(),function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.CommonTable=e()}(this,function(){function t(t,e,r){return this.tableData=null,this.hdrGroups=[],this.headerObjs=[],this.headerElems=[],this.tableElement=document.createElement("table"),this.tbodyElement=document.createElement("tbody"),this.tableElement.append(this.tbodyElement),this.tableElement.className="cm-table",t&&this.tableElement.setAttribute("id",t),e&&this.tableElement.classList.add(e),r&&r.append(this.tableElement),this}return t.prototype.appendTo=function(t){return t.append(this.tableElement),this},t.prototype.prependTo=function(t){return t.prepend(this.tableElement),this},t.prototype.addColumn=function(t,e,r,n){return t&&t.hasOwnProperty("title")&&t.hasOwnProperty("key")&&!e&&!r?(t.group||(t.group=null),this.headerObjs.push(t)):(t||(t=null),n||(n={}),this.headerObjs.push({group:t,title:e,key:r,format:n.format,dateFormat:n.dateFormat,hdrStyles:n.hdrStyles,colStyles:n.colStyles,onClick:n.onClick,sortable:void 0===n.sortable||n.sortable})),this},t.prototype.createHeaders=function(t,e){var r=this;this.tbodyElement.innerHTML="";for(var n=[],o=0;o<2;++o){var i=document.createElement("tr");i.setAttribute("cm-table-rowtype","header-row"),this.tbodyElement.append(i),n.push(i)}for(var s=null,a=null,o=0;o<this.headerObjs.length;o++){var l=this.headerObjs[o];l.group&&(s&&l.group===s?a.setAttribute("colspan",1+parseInt(a.attr("colspan"))):(s=l.group,a=document.createElement("th"),a.innerHTML=l.group,a.setAttributes({style:"text-align:center;",colspan:1,"cm-table-celltype":"header-group"}),n[0].append(a)));var c=document.createElement("th");c.innerHTML=l.title,c.setAttribute("cm-table-celltype","header");var p={};if(l.colStyles)for(var h in l.colStyles)p[h]=l.colStyles[h];if(l.hdrStyles)for(var h in l.hdrStyles)p[h]=l.hdrStyles[h];c.css(p);var u=t&&t===l.key;if(u){var d=document.createElement("i");d.className="icon-"+(e?"ascending":"descending"),c.append(d)}l.sortable&&(c.css("cursor","pointer"),c.addEventListener("click",function(t,e){return function(n){n.stopPropagation(),r.populateTable(null,t,e)}}(l.key,!u||!e))),l.group?n[1].append(c):(c.setAttribute("rowspan",2),n[0].append(c))}return n[1].hasChildNodes()||(n[1].remove(),n[0].querySelectorAll("th").forEach(function(t){t.setAttribute("rowspan","")})),this},t.prototype.populateTable=function(t,e,r,n){this.createHeaders(e,r),t&&(this.tableData=t);var o=this.tableData;if(e&&o.length){var o=this.tableData.slice();o.sort(function(t,n){var o=0,i=[t[e],n[e]],s=[void 0===i[0],void 0===i[1]];if(s[0]!==s[1])o=s[0]?-1:1;else if(!s[0])if("number"==typeof i[0]&&"number"==typeof i[1])o=i[0]-i[1];else{var a=[Date.parse(i[0]),Date.parse(i[1])];o=isNaN(a[0])||isNaN(a[0])?i[0].localeCompare(i[1]):a[0]-a[1]}return r?o:-o})}for(var i=0;i<o.length;i++){var s=document.createElement("tr");s.setAttribute("cm-table-rowtype","data"),this.tbodyElement.append(s);for(var a=0;a<this.headerObjs.length;a++){var l=o[i][this.headerObjs[a].key];if(this.headerObjs[a].format)l=this.headerObjs[a].format(l);else if(this.headerObjs[a].dateFormat)try{l=n(l,this.headerObjs[a].dateFormat)}catch(t){}var c=document.createElement("td");if(c.setAttribute("cm-table-celltype","data"),s.append(c),this.headerObjs[a].colStyles&&c.css(this.headerObjs[a].colStyles),this.headerObjs[a].onClick){var p=document.createElement("a");p.setAttribute("href","#"),p.innerHTML=l,c.append(p),p.addEventListener("click",function(t,e){return function(r){t(e),r.preventDefault()}}(this.headerObjs[a].onClick,o[i]))}else c.innerHTML=l}}return this},t});
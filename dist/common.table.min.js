!function(){Element.prototype.remove||(Element.prototype.remove=function(){this.parentNode?this.parentNode.removeChild(this):this.removeNode()}),function(t){t.forEach(function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){var n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))}),this.appendChild(e)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),function(t){t.forEach(function(t){t.hasOwnProperty("prepend")||Object.defineProperty(t,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){var n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))}),this.insertBefore(e,this.firstChild)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(t){"use strict";if("Element"in t){var e=t.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},i=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new i("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new i("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},a=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],o=0,i=n.length;o<i;o++)this.push(n[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=a.prototype=[],c=function(){return new a(this)};if(i.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return~s(this,t+"")},l.add=function(){var t,e=arguments,n=0,r=e.length,o=!1;do{t=e[n]+"",~s(this,t)||(this.push(t),o=!0)}while(++n<r);o&&this._updateClassName()},l.remove=function(){var t,e,n=arguments,r=0,o=n.length,i=!1;do{for(t=n[r]+"",e=s(this,t);~e;)this.splice(e,1),i=!0,e=s(this,t)}while(++r<o);i&&this._updateClassName()},l.toggle=function(t,e){var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},l.replace=function(t,e){var n=s(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},l.toString=function(){return this.join(" ")},n.defineProperty){var p={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",p)}catch(t){void 0!==t.number&&-2146823252!==t.number||(p.enumerable=!1,n.defineProperty(e,"classList",p))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",c)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),r=n.indexOf(t+"");~r&&(n=n.slice(r),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}()),String.prototype.repeat||(String.prototype.repeat=function(t){"use strict";if(null===this||void 0===this)throw new TypeError('can"t convert '+this+" to object");if((t=+t)!==t)return"";if(0===(t=Math.floor(t)))return"";if(t<=0)throw new RangeError("repeat count must be non-negative");if(t===1/0)throw new RangeError("repeat count must be less than infinity");var e=""+this;if(0===e.length)return"";if(e.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="",r=0;r<t;r++)n+=e;return n}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t})}(),function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.CommonTable=e()}(this,function(){function t(t,e,n){return this.tableData=null,this.hdrGroups=[],this.headerObjs=[],this.headerElems=[],this.tableElement=document.createElement("table"),this.tbodyElement=document.createElement("tbody"),this.tableElement.append(this.tbodyElement),this.tableElement.className="cm-table",t&&this.tableElement.setAttribute("id",t),e&&this.tableElement.classList.add(e),n&&n.append(this.tableElement),this}return t.prototype.appendTo=function(t){return t.append(this.tableElement),this},t.prototype.prependTo=function(t){return t.prepend(this.tableElement),this},t.prototype.addColumn=function(t,e,n,r){return t&&t.hasOwnProperty("title")&&t.hasOwnProperty("key")&&!e&&!n?(t.group||(t.group=null),this.headerObjs.push(t)):(t||(t=null),r||(r={}),this.headerObjs.push({group:t,title:e,key:n,format:r.format,dateFormat:r.dateFormat,hdrStyles:r.hdrStyles,colStyles:r.colStyles,onClick:r.onClick,sortable:void 0===r.sortable||r.sortable})),this},t.prototype.createHeaders=function(t,e){var n=this;this.tbodyElement.innerHTML="";for(var r=[],o=0;o<2;++o){var i=document.createElement("tr");i.setAttribute("cm-table-rowtype","header-row"),this.tbodyElement.append(i),r.push(i)}for(var s=null,a=null,o=0;o<this.headerObjs.length;o++){var l=this.headerObjs[o];l.group&&(s&&l.group===s?a.setAttribute("colspan",1+parseInt(a.attr("colspan"))):(s=l.group,a=document.createElement("th"),a.innerHTML=l.group,a.setAttributes({style:"text-align:center;",colspan:1,"cm-table-celltype":"header-group"}),r[0].append(a)));var c=document.createElement("th");c.innerHTML=l.title,c.setAttribute("cm-table-celltype","header");var p={};if(l.colStyles)for(var h in l.colStyles)p[h]=l.colStyles[h];if(l.hdrStyles)for(var h in l.hdrStyles)p[h]=l.hdrStyles[h];c.css(p);var u=t&&t===l.key;if(u){var d=document.createElement("i");d.className="icon-"+(e?"ascending":"descending"),c.append(d)}l.sortable&&(c.css("cursor","pointer"),c.addEventListener("click",function(t,e){return function(r){r.stopPropagation(),n.populateTable(null,t,e)}}(l.key,!u||!e))),l.group?r[1].append(c):(c.setAttribute("rowspan",2),r[0].append(c))}return r[1].hasChildNodes()||(r[1].remove(),r[0].querySelectorAll("th").forEach(function(t){t.setAttribute("rowspan","")})),this},t.prototype.populateTable=function(t,e,n,r){this.createHeaders(e,n),t&&(this.tableData=t);var o=this.tableData;if(e&&o.length){var o=this.tableData.slice();o.sort(function(t,r){var o=0,i=[t[e],r[e]],s=[void 0===i[0],void 0===i[1]];if(s[0]!==s[1])o=s[0]?-1:1;else if(!s[0])if("number"==typeof i[0]&&"number"==typeof i[1])o=i[0]-i[1];else{var a=[Date.parse(i[0]),Date.parse(i[1])];o=isNaN(a[0])||isNaN(a[0])?i[0].localeCompare(i[1]):a[0]-a[1]}return n?o:-o})}for(var i=0;i<o.length;i++){var s=document.createElement("tr");s.setAttribute("cm-table-rowtype","data"),this.tbodyElement.append(s);for(var a=0;a<this.headerObjs.length;a++){var l=o[i][this.headerObjs[a].key];if(this.headerObjs[a].format)l=this.headerObjs[a].format(l);else if(this.headerObjs[a].dateFormat)try{l=r(l,this.headerObjs[a].dateFormat)}catch(t){}var c=document.createElement("<td>");if(c.setAttribute("cm-table-celltype","data"),s.append(c),this.headerObjs[a].colStyles&&c.css(this.headerObjs[a].colStyles),this.headerObjs[a].onClick){var p=document.createElement("a");p.setAttribute("href","#"),p.innerHTML=l,c.append(p),p.addEventListener("click",function(t,e){return function(n){t(e),n.preventDefault()}}(this.headerObjs[a].onClick,o[i]))}else c.innerHTML=l}}return this},t});
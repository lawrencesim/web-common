!function(){"use strict";Element.prototype.remove||(Element.prototype.remove=function(){this.parentNode?this.parentNode.removeChild(this):this.removeNode()}),function(t){t.forEach(function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){var r=t instanceof Node;e.appendChild(r?t:document.createTextNode(String(t)))}),this.appendChild(e)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),function(t){t.forEach(function(t){t.hasOwnProperty("prepend")||Object.defineProperty(t,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){var r=t instanceof Node;e.appendChild(r?t:document.createTextNode(String(t)))}),this.insertBefore(e,this.firstChild)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(t){if("Element"in t){var e=t.Element.prototype,r=Object,n=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},i=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new i("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new i("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},s=function(t){for(var e=n.call(t.getAttribute("class")||""),r=e?e.split(/\s+/):[],o=0,i=r.length;o<i;o++)this.push(r[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=s.prototype=[],c=function(){return new s(this)};if(i.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return~a(this,t+"")},l.add=function(){var t,e=arguments,r=0,n=e.length,o=!1;do{t=e[r]+"",~a(this,t)||(this.push(t),o=!0)}while(++r<n);o&&this._updateClassName()},l.remove=function(){var t,e,r=arguments,n=0,o=r.length,i=!1;do{for(t=r[n]+"",e=a(this,t);~e;)this.splice(e,1),i=!0,e=a(this,t)}while(++n<o);i&&this._updateClassName()},l.toggle=function(t,e){var r=this.contains(t),n=r?!0!==e&&"remove":!1!==e&&"add";return n&&this[n](t),!0===e||!1===e?e:!r},l.replace=function(t,e){var r=a(t+"");~r&&(this.splice(r,1,e),this._updateClassName())},l.toString=function(){return this.join(" ")},r.defineProperty){var p={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(e,"classList",p)}catch(t){void 0!==t.number&&-2146823252!==t.number||(p.enumerable=!1,r.defineProperty(e,"classList",p))}}else r.prototype.__defineGetter__&&e.__defineGetter__("classList",c)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var r,n=arguments.length;for(r=0;r<n;r++)t=arguments[r],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:r.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var r=this.toString().split(" "),n=r.indexOf(t+"");~n&&(r=r.slice(n),this.remove.apply(this,r),this.add(e),this.add.apply(this,r.slice(1)))}),t=null}()),String.prototype.repeat||(String.prototype.repeat=function(t){if(null===this||void 0===this)throw new TypeError('can"t convert '+this+" to object");if((t=+t)!==t)return"";if(0===(t=Math.floor(t)))return"";if(t<=0)throw new RangeError("repeat count must be non-negative");if(t===1/0)throw new RangeError("repeat count must be less than infinity");var e=""+this;if(0===e.length)return"";if(e.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var r="",n=0;n<t;n++)r+=e;return r}),String.prototype.startsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,r=e(t,t,t)&&e}catch(t){}return r}(),e={}.toString,r=function(t){if(null==this)throw TypeError();var r=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var n=r.length,o=String(t),i=o.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;s!=s&&(s=0);var l=Math.min(Math.max(s,0),n);if(i+l>n)return!1;for(var c=-1;++c<i;)if(r.charCodeAt(l+c)!=o.charCodeAt(c))return!1;return!0};t?t(String.prototype,"startsWith",{value:r,configurable:!0,writable:!0}):String.prototype.startsWith=r}(),String.prototype.endsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,r=e(t,t,t)&&e}catch(t){}return r}(),e={}.toString,r=function(t){if(null==this)throw TypeError();var r=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var n=r.length,o=String(t),i=o.length,a=n;if(arguments.length>1){var s=arguments[1];void 0!==s&&(a=s?Number(s):0)!=a&&(a=0)}var l=Math.min(Math.max(a,0),n),c=l-i;if(c<0)return!1;for(var p=-1;++p<i;)if(r.charCodeAt(c+p)!=o.charCodeAt(p))return!1;return!0};t?t(String.prototype,"endsWith",{value:r,configurable:!0,writable:!0}):String.prototype.endsWith=r}()}(),function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.CommonTable=e()}(this,function(){function t(t,e,r){return this.tableData=null,this.hdrGroups=[],this.headerObjs=[],this.headerElems=[],this.tableElement=document.createElement("table"),this.tbodyElement=document.createElement("tbody"),this.tableElement.append(tbodyElement),this.tableElement.className="cm-table",t&&this.tableElement.setAttribute("id",t),e&&this.tableElement.classList.add(e),r&&r.append(this.tableElement),this}return t.prototype.appendTo=function(t){return t.append(this.tableElement),this},t.prototype.prependTo=function(t){return t.prepend(this.tableElement),this},t.prototype.addColumn=function(t,e,r,n){return t&&t.hasOwnProperty("title")&&t.hasOwnProperty("key")&&!e&&!r?(t.group||(t.group=null),this.headerObjs.push(t)):(t||(t=null),n||(n={}),this.headerObjs.push({group:t,title:e,key:r,format:n.format,dateFormat:n.dateFormat,hdrStyles:n.hdrStyles,colStyles:n.colStyles,onClick:n.onClick,sortable:void 0===n.sortable||n.sortable})),this},t.prototype.createHeaders=function(t,e){var r=this;this.tbodyElement.innerHTML="";for(var n=[],o=0;o<2;++o){var i=document.createElement("tr");i.setAttribute("cm-table-rowtype","header-row"),this.tbodyElement.append(i),n.push(i)}for(var a=null,s=null,o=0;o<this.headerObjs.length;o++){var l=this.headerObjs[o];l.group&&(a&&l.group===a?s.setAttribute("colspan",1+parseInt(s.attr("colspan"))):(a=l.group,s=document.createElement("th"),s.innerHTML=l.group,s.setAttributes({style:"text-align:center;",colspan:1,"cm-table-celltype":"header-group"}),n[0].append(s)));var c=document.createElement("th");c.innerHTML=l.title,c.setAttribute("cm-table-celltype","header");var p={};if(l.colStyles)for(var h in l.colStyles)p[h]=l.colStyles[h];if(l.hdrStyles)for(var h in l.hdrStyles)p[h]=l.hdrStyles[h];c.css(p);var u=t&&t===l.key;if(u){var d=document.createElement("i");d.className="icon-"+(e?"ascending":"descending"),c.append(d)}l.sortable&&(c.css("cursor","pointer"),c.addEventListener("click",function(t,e){return function(n){n.stopPropagation(),r.populateTable(null,t,e)}}(l.key,!u||!e))),l.group?n[1].append(c):(c.setAttribute("rowspan",2),n[0].append(c))}return n[1].hasChildNodes()||(n[1].remove(),n[0].querySelectorAll("th").forEach(function(){this.setAttribute("rowspan","")})),this},t.prototype.populateTable=function(t,e,r,n){this.createHeaders(e,r),t&&(this.tableData=t);var o=this.tableData;if(e&&o.length){var o=this.tableData.slice();o.sort(function(t,n){var o=0,i=[t[e],n[e]],a=[void 0===i[0],void 0===i[1]];if(a[0]!==a[1])o=a[0]?-1:1;else if(!a[0])if("number"==typeof i[0]&&"number"==typeof i[1])o=i[0]-i[1];else{var s=[Date.parse(i[0]),Date.parse(i[1])];o=isNaN(s[0])||isNaN(s[0])?i[0].localeCompare(i[1]):s[0]-s[1]}return r?o:-o})}for(var i=0;i<o.length;i++){var a=document.createElement("tr");a.setAttribute("cm-table-rowtype","data"),this.tbodyElement.append(a);for(var s=0;s<this.headerObjs.length;s++){var l=o[i][this.headerObjs[s].key];if(this.headerObjs[s].format)l=this.headerObjs[s].format(l);else if(this.headerObjs[s].dateFormat)try{l=n(l,this.headerObjs[s].dateFormat)}catch(t){}var c=document.createElement("<td>");if(c.setAttribute("cm-table-celltype","data"),a.append(c),this.headerObjs[s].colStyles&&c.css(this.headerObjs[s].colStyles),this.headerObjs[s].onClick){var p=document.createElement("a");p.setAttribute("href","#"),p.innerHTML=l,c.append(p),p.addEventListener("click",function(t,e){return function(r){t(e),r.preventDefault()}}(this.headerObjs[s].onClick,o[i]))}else c.innerHTML=l}}return this},t});
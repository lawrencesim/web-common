!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CommonTable=t():e.CommonTable=t()}(this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function r(e,t,r){return this.tableData=null,this.hdrGroups=[],this.headerObjs=[],this.headerElems=[],this.tableElement=document.createElement("table"),this.tbodyElement=document.createElement("tbody"),this.tableElement.append(this.tbodyElement),this.tableElement.className="cm-table",e&&this.tableElement.setAttribute("id",e),t&&this.tableElement.classList.add(t),r&&r.append(this.tableElement),this}e.d(t,{default:()=>a}),r.prototype.appendTo=function(e){return e.append(this.tableElement),this},r.prototype.prependTo=function(e){return e.prepend(this.tableElement),this},r.prototype.addColumn=function(e,t,r,a){return Object.isObjectLiteral(e)&&(t=e.title,r=e.key,a=e,e=e.group),e||(e=null),a||(a={}),this.headerObjs.push({group:e,title:t,key:r,format:a.format,hdrStyles:a.hdrStyles,colStyles:a.colStyles,onClick:a.onClick,sortable:void 0===a.sortable||a.sortable}),this},r.prototype.createHeaders=function(e,t){var r=this;Object.isObjectLiteral(e)&&(t=options.ascending,e=options.sortOnKey),this.tbodyElement.innerHTML="";for(var a=[],n=0;n<2;++n){var o=document.createElement("tr");o.setAttribute("cm-table-rowtype","header-row"),this.tbodyElement.append(o),a.push(o)}var l=null,s=null;return this.headerObjs.forEach((function(n){n.group&&(l&&n.group===l?s.setAttribute("colspan",1+parseInt(s.getAttribute("colspan"))):(l=n.group,(s=document.createElement("th")).innerHTML=n.group,s.setAttributes({style:"text-align:center;",colspan:1,"cm-table-celltype":"header-group"}),a[0].append(s)));var o=document.createElement("th");o.innerHTML=n.title,o.setAttribute("cm-table-celltype","header");var i={};if(n.colStyles)for(var c in n.colStyles)i[c]=n.colStyles[c];if(n.hdrStyles)for(var p in n.hdrStyles)i[p]=n.hdrStyles[p];o.css(i);var d,u,b=e&&e===n.key;if(b){var h=document.createElement("i");h.className="icon-"+(t?"ascending":"descending"),o.append(h)}n.sortable&&(o.css("cursor","pointer"),o.addEventListener("click",(d=n.key,u=!b||!t,function(e){e.stopPropagation(),r.populateTable(null,d,u)}))),n.group?a[1].append(o):(o.setAttribute("rowspan",2),a[0].append(o))})),a[1].hasChildNodes()||(a[1].remove(),a[0].querySelectorAll("th").forEach((function(e){return e.setAttribute("rowspan","")}))),this},r.prototype.populateTable=function(e,t,r){var a=this;Object.isObjectLiteral(e)&&(t=e.sortOnKey,r=e.ascending,e=e.tableData),this.createHeaders(t,r),e&&(this.tableData=e);var n=this.tableData;return t&&n.length&&(n=this.tableData.slice()).sort((function(e,a){var n=0,o=[e[t],a[t]],l=[void 0===o[0],void 0===o[1]];if(l[0]!==l[1])n=l[0]?-1:1;else if(!l[0])if("number"==typeof o[0]&&"number"==typeof o[1])n=o[0]-o[1];else{var s=[Date.parse(o[0]),Date.parse(o[1])];n=isNaN(s[0])||isNaN(s[0])?o[0].localeCompare(o[1]):s[0]-s[1]}return r?n:-n})),n.forEach((function(e){var t=document.createElement("tr");t.setAttribute("cm-table-rowtype","data"),a.headerObjs.forEach((function(r){var a=e[r.key];if(r.format)try{a=r.format(a)}catch(e){}var n,o,l=document.createElement("td");if(l.setAttribute("cm-table-celltype","data"),t.append(l),r.colStyles&&l.css(r.colStyles),r.onClick){var s=document.createElement("a");s.setAttribute("href","#"),s.innerHTML=a,l.append(s),s.addEventListener("click",(n=r.onClick,o=e,function(e){n(o),e.preventDefault()}))}else l.innerHTML=a})),a.tbodyElement.append(t)})),this};const a=r;return t.default})()));